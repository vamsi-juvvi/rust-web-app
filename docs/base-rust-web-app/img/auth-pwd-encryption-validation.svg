<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="886px" preserveAspectRatio="none" style="width:725px;height:886px;background:#FFFFFF;" version="1.1" viewBox="0 0 725 886" width="725px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="35" x2="35" y1="81.2969" y2="806.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="234.0913" x2="234.0913" y1="81.2969" y2="806.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310.7944" x2="310.7944" y1="81.2969" y2="806.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="570.3853" x2="570.3853" y1="81.2969" y2="806.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="637.2349" x2="637.2349" y1="81.2969" y2="806.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="690.2349" x2="690.2349" y1="81.2969" y2="806.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="77.9951">Client</text><ellipse cx="35.2651" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M35.2651,21.5 L35.2651,48.5 M22.2651,29.5 L48.2651,29.5 M35.2651,48.5 L22.2651,63.5 M35.2651,48.5 L48.2651,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="12" y="818.0107">Client</text><ellipse cx="35.2651" cy="829.8125" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M35.2651,837.8125 L35.2651,864.8125 M22.2651,845.8125 L48.2651,845.8125 M35.2651,864.8125 L22.2651,879.8125 M35.2651,864.8125 L48.2651,879.8125 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="191.0913" y="77.9951">Web Server</text><path d="M214.4429,37 L214.4429,61 M214.4429,49 L231.4429,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="243.4429" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="191.0913" y="818.0107">Web Server</text><path d="M214.4429,825.3125 L214.4429,849.3125 M214.4429,837.3125 L231.4429,837.3125 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="243.4429" cy="837.3125" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.8145" x="288.7944" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.8145" x="295.7944" y="69.9951">auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.8145" x="288.7944" y="805.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.8145" x="295.7944" y="825.0107">auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.8496" x="532.3853" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.8496" x="539.3853" y="69.9951">UserBmc</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.8496" x="532.3853" y="805.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.8496" x="539.3853" y="825.0107">UserBmc</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20.3848" x="624.0425" y="77.9951">DB</text><path d="M619.2349,29 C619.2349,19 637.2349,19 637.2349,19 C637.2349,19 655.2349,19 655.2349,29 L655.2349,55 C655.2349,65 637.2349,65 637.2349,65 C637.2349,65 619.2349,65 619.2349,55 L619.2349,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M619.2349,29 C619.2349,39 637.2349,39 637.2349,39 C637.2349,39 655.2349,39 655.2349,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20.3848" x="624.0425" y="818.0107">DB</text><path d="M619.2349,831.3125 C619.2349,821.3125 637.2349,821.3125 637.2349,821.3125 C637.2349,821.3125 655.2349,821.3125 655.2349,831.3125 L655.2349,857.3125 C655.2349,867.3125 637.2349,867.3125 637.2349,867.3125 C637.2349,867.3125 619.2349,867.3125 619.2349,857.3125 L619.2349,831.3125 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M619.2349,831.3125 C619.2349,841.3125 637.2349,841.3125 637.2349,841.3125 C637.2349,841.3125 655.2349,841.3125 655.2349,831.3125 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.9189" x="665.2349" y="77.9951">Config</text><path d="M672.6943,29 C672.6943,19 690.6943,19 690.6943,19 C690.6943,19 708.6943,19 708.6943,29 L708.6943,55 C708.6943,65 690.6943,65 690.6943,65 C690.6943,65 672.6943,65 672.6943,55 L672.6943,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M672.6943,29 C672.6943,39 690.6943,39 690.6943,39 C690.6943,39 708.6943,39 708.6943,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.9189" x="665.2349" y="818.0107">Config</text><path d="M672.6943,831.3125 C672.6943,821.3125 690.6943,821.3125 690.6943,821.3125 C690.6943,821.3125 708.6943,821.3125 708.6943,831.3125 L708.6943,857.3125 C708.6943,867.3125 690.6943,867.3125 690.6943,867.3125 C690.6943,867.3125 672.6943,867.3125 672.6943,857.3125 L672.6943,831.3125 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M672.6943,831.3125 C672.6943,841.3125 690.6943,841.3125 690.6943,841.3125 C690.6943,841.3125 708.6943,841.3125 708.6943,831.3125 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="222.9429,108.4297,232.9429,112.4297,222.9429,116.4297,226.9429,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="35.2651" x2="228.9429" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38.7271" x="42.2651" y="107.3638">https</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.2583" x="85.1245" y="107.3638">/api/login</text><path d="M5,125.4297 L5,195.4297 L266,195.4297 L266,135.4297 L256,125.4297 L5,125.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M256,125.4297 L256,135.4297 L266,135.4297 L256,125.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="55.1746" y="142.4966">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9639" x="63.4392" y="157.6294">username : "demo1"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.1807" x="63.4392" y="172.7622">pwd_clear: "welcome"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="55.1746" y="187.895">}</text><polygon fill="#181818" points="299.7017,202.9609,309.7017,206.9609,299.7017,210.9609,303.7017,206.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.9429" x2="305.7017" y1="206.9609" y2="206.9609"/><polygon fill="#181818" points="558.8101,232.0938,568.8101,236.0938,558.8101,240.0938,562.8101,236.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.7017" x2="564.8101" y1="236.0938" y2="236.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.979" x="318.7017" y="231.0278">first_by_username(..)</text><polygon fill="#181818" points="625.2349,261.2266,635.2349,265.2266,625.2349,269.2266,629.2349,265.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="570.8101" x2="631.2349" y1="265.2266" y2="265.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.6367" x="577.8101" y="260.1606">sql</text><polygon fill="#181818" points="581.8101,290.3594,571.8101,294.3594,581.8101,298.3594,577.8101,294.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="575.8101" x2="636.2349" y1="294.3594" y2="294.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.9307" x="587.8101" y="289.2935">row</text><polygon fill="#181818" points="322.7017,304.3594,312.7017,308.3594,322.7017,312.3594,318.7017,308.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.7017" x2="569.8101" y1="308.3594" y2="308.3594"/><path d="M283,321.3594 L283,452.3594 L598,452.3594 L598,331.3594 L588,321.3594 L283,321.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M588,321.3594 L588,331.3594 L598,331.3594 L588,321.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="364.606" y="338.4263">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.5981" x="372.8706" y="353.5591">// UserForLogin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.7246" x="372.8706" y="368.6919">id : 1000,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9639" x="372.8706" y="383.8247">username: "demo1",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.5962" x="372.8706" y="398.9575">pwd : "#01#...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.2036" x="372.8706" y="414.0903">pwd_salt : uuid.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.7515" x="372.8706" y="429.2231">token_salt: uuid,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="364.606" y="444.356">}</text><polygon fill="#181818" points="678.6943,474.5547,688.6943,478.5547,678.6943,482.5547,682.6943,478.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.7017" x2="684.6943" y1="478.5547" y2="478.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.2104" x="318.7017" y="473.4888">get_key()</text><polygon fill="#181818" points="322.7017,503.6875,312.7017,507.6875,322.7017,511.6875,318.7017,507.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.7017" x2="689.6943" y1="507.6875" y2="507.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24.6797" x="328.7017" y="502.6216">KEY</text><line style="stroke:#181818;stroke-width:1.0;" x1="311.7017" x2="353.7017" y1="536.8203" y2="536.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="353.7017" x2="353.7017" y1="536.8203" y2="549.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="312.7017" x2="353.7017" y1="549.8203" y2="549.8203"/><polygon fill="#181818" points="322.7017,545.8203,312.7017,549.8203,322.7017,553.8203,318.7017,549.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245.1084" x="318.7017" y="531.7544">pwd = ENCRYPT(pwd_clear, key, salt)</text><line style="stroke:#181818;stroke-width:1.0;" x1="311.7017" x2="353.7017" y1="578.9531" y2="578.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="353.7017" x2="353.7017" y1="578.9531" y2="591.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="312.7017" x2="353.7017" y1="591.9531" y2="591.9531"/><polygon fill="#181818" points="322.7017,587.9531,312.7017,591.9531,322.7017,595.9531,318.7017,591.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.2861" x="318.7017" y="573.8872">VALIDATE(pwd, user.pwd, key, salt)</text><line style="stroke:#181818;stroke-width:1.0;" x1="311.7017" x2="353.7017" y1="621.0859" y2="621.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="353.7017" x2="353.7017" y1="621.0859" y2="634.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="312.7017" x2="353.7017" y1="634.0859" y2="634.0859"/><polygon fill="#181818" points="322.7017,630.0859,312.7017,634.0859,322.7017,638.0859,318.7017,634.0859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1138" x="318.7017" y="616.02">CREATE_TOKEN(.., salt, key)</text><polygon fill="#181818" points="245.9429,659.2188,235.9429,663.2188,245.9429,667.2188,241.9429,663.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="239.9429" x2="310.7017" y1="663.2188" y2="663.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.8164" x="251.9429" y="658.1528">token</text><polygon fill="#181818" points="46.2651,688.3516,36.2651,692.3516,46.2651,696.3516,42.2651,692.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="40.2651" x2="233.9429" y1="692.3516" y2="692.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.6777" x="52.2651" y="687.2856">setCookie(token, httpOnly)</text><path d="M5,705.3516 L5,790.3516 L266,790.3516 L266,715.3516 L256,705.3516 L5,705.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M256,705.3516 L256,715.3516 L266,715.3516 L256,705.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="70.7549" y="722.4185">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.8877" x="83.1519" y="737.5513">username_b64u,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.3013" x="83.1519" y="752.6841">expiration_b64u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.0547" x="83.1519" y="767.8169">signature_b64u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="70.7549" y="782.9497">}</text><!--SRC=[TPBVQzim4CVVzLSSxaiIL2U1iOVI3Hh7Wz7IZZPjwPEHxOihuaYU93SDO_zxJtBiP6DxiQNF_VoUJXHE6qXgYSg1iD1QD2pNhIg5sKFqZ3aye7b34tdh3dFM2EDa8HlX0rht-WTufF35jc2bS28N5c6vE9uJhTQoydcATSMOBmNdNtrIk839vDMvnaucC1MDdDQwaeefxH0qLGzzyL3_5uDmKsAB51ULkDNpY62pAxEYHc48xh0kz1OZzfkXAi7dOSmNedgXQUQ__dRec3AjfR4ko_TPdtqKnsFMsybrkG0WF_kp7kZbUK-DtXsI4kl7SEpVM_Z0lORfD5o_QNCJj0B8alBCPxCPFv4uAEITH2_vR3O_Y-EuHvaLjIFUjhAC2JczGHLWn_Zf57hTz0I-xGfTji7zQ3pqVZ1Sfo-3R_XVXEfV8BrDxbz-h4R3k3bG0Ww-tlZlaAUhc-_BgrNglNdG58VJ_oEI-vJyizNTTNfB3z1vXO1nzuBKOd0bto0qx171ReqikaJhZSHHC7BmMtMdQeh-rp81-AU0uxYp_FEdbdSCtnjfX9DQ1Tf1AoibN6kmPoUp_G00]--></g></svg>