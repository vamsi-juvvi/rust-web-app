<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="671px" preserveAspectRatio="none" style="width:1282px;height:671px;background:#FFFFFF;" version="1.1" viewBox="0 0 1282 671" width="1282px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="40.9531" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="141.2715" x="10" y="314.3086"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="121.2715" x="20" y="341.0166">LLM Worker</text><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="62.8408" x="201.2715" y="34.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.8408" x="211.2715" y="57.5889">config</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162.9756" x="317.1123" y="23.9951">hardcode 8081 for now</text><path d="M264.1123,52.7422 L274.1123,52.7422 C289.1123,52.7422 289.1123,19.1484 304.1123,19.1484 L314.1123,19.1484 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="317.1123" y="42.292">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="259.5537" x="317.1123" y="58.5889">finalize when k8s deployment occurs</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="307.9727" x="317.1123" y="74.8857">about what goes into config, what goes into</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="258.9316" x="317.1123" y="91.1826">dns resolver mocks in dev-mode etc.</text><path d="M264.1123,52.7422 L274.1123,52.7422 C289.1123,52.7422 289.1123,61.8906 304.1123,61.8906 L314.1123,61.8906 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,52.7422 191.2715,52.7422 L201.2715,52.7422 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="274.2559" x="201.2715" y="105.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.2764" x="211.2715" y="128.4795">&#10060; ctx_resolver &#8594;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="135.5293" x="329.998" y="128.4795">ctx_root_resolver</text><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,123.6328 191.2715,123.6328 L201.2715,123.6328 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#FFFF00" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="165.8037" x="201.2715" y="331.582"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="140.9297" x="211.2715" y="354.5771">&#10133;ctx_leaf_resolver</text><rect fill="#F1F1F1" height="166.6719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="365.6318" x="417.0752" y="161.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="249.833" x="427.0752" y="184.7764">All workers will need a user context</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="345.6318" x="427.0752" y="201.0732">to know who the logged in user was and get user</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.3311" x="427.0752" y="217.3701">specific data.</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="427.0752" y="233.667">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.3926" x="427.0752" y="249.9639">Axum layers with</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79.4883" x="552.918" y="249.9639">ctx_resolve</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.3389" x="636.8564" y="249.9639">and</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78.8594" x="667.6455" y="249.9639">ctx_require</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="746.5049" y="249.9639">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244.6035" x="427.0752" y="266.2607">work great: stick with that concept</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="427.0752" y="282.5576">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="329.9912" x="427.0752" y="298.8545">Can I get the ctx via json-rpc call instead of via</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187.0518" x="427.0752" y="315.1514">HTTP Cookies or headers ?</text><path d="M367.0752,349.7305 L377.0752,349.7305 C392.0752,349.7305 392.0752,245.1172 407.0752,245.1172 L417.0752,245.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="117.7813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="295.6865" x="417.0752" y="352.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.9365" x="427.0752" y="375.1514">new</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132.5283" x="460.4619" y="375.1514">ctx_leaf_resolver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="240.7275" x="427.0752" y="391.4482">hard to come up with good names</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.707" x="427.0752" y="407.7451">made the front one</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="135.5293" x="567.2324" y="407.7451">ctx_root_resolver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="427.0752" y="424.042">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="31.8145" x="427.0752" y="440.3389">auth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="458.8896" y="440.3389">,</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="59.8828" x="467.79" y="440.3389">gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="527.6729" y="440.3389">,</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="54.79" x="536.5732" y="440.3389">primary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="591.3633" y="440.3389">,</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60.7646" x="600.2637" y="440.3389">webauth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.7998" x="665.4785" y="440.3389">etc</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.8369" x="427.0752" y="456.6357">are all choices</text><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="210.3945" x="762.7617" y="348.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="772.7617" y="371.4482">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107.748" x="777.2119" y="371.4482">auth_resolver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.7461" x="889.4102" y="371.4482">injects</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="23.5498" x="939.6064" y="371.4482">Ctx</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.9707" x="772.7617" y="387.7451">into JSON RPC calls</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.5508" x="772.7617" y="404.042">Cookie is also an option</text><path d="M712.7617,411.0469 L722.7617,411.0469 C737.7617,411.0469 737.7617,382.8984 752.7617,382.8984 L762.7617,382.8984 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="332.498" x="762.7617" y="437.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312.498" x="772.7617" y="460.3389">akin to API_TOKEN that API services give out</text><path d="M712.7617,411.0469 L722.7617,411.0469 C737.7617,411.0469 737.7617,455.4922 752.7617,455.4922 L762.7617,455.4922 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M367.0752,349.7305 L377.0752,349.7305 C392.0752,349.7305 392.0752,411.0469 407.0752,411.0469 L417.0752,411.0469 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="441.8271" x="420.0752" y="497.6357">Start by faking it and putting in a random Ctx object in for now</text><path d="M367.0752,349.7305 L377.0752,349.7305 C392.0752,349.7305 392.0752,492.7891 407.0752,492.7891 L417.0752,492.7891 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9014" x="420.0752" y="525.0811">Inject serialized</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="23.5498" x="534.4268" y="525.0811">Ctx</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253.2031" x="562.4268" y="525.0811">in JSON RPC payloads from gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="303.8301" x="868.6299" y="515.9326">&#10060; means body has to be parsed to read Ctx</text><path d="M815.6299,520.2344 L825.6299,520.2344 C840.6299,520.2344 840.6299,511.0859 855.6299,511.0859 L865.6299,511.0859 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401.6797" x="868.6299" y="534.2295">&#10004;&#65039; in header or cookies means just header needs parsing.</text><path d="M815.6299,520.2344 L825.6299,520.2344 C840.6299,520.2344 840.6299,529.3828 855.6299,529.3828 L865.6299,529.3828 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M367.0752,349.7305 L377.0752,349.7305 C392.0752,349.7305 392.0752,520.2344 407.0752,520.2344 L417.0752,520.2344 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.8975" x="420.0752" y="543.3779">Read that serialized</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="23.5498" x="564.4229" y="543.3779">Ctx</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="587.9727" y="543.3779">&#160;</text><path d="M367.0752,349.7305 L377.0752,349.7305 C392.0752,349.7305 392.0752,538.5313 407.0752,538.5313 L417.0752,538.5313 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,349.7305 191.2715,349.7305 L201.2715,349.7305 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="115.04" x="201.2715" y="387.8789"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.04" x="211.2715" y="410.874">&#10004;&#65039; ctx_require</text><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,406.0273 191.2715,406.0273 L201.2715,406.0273 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="144.5576" x="201.2715" y="444.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.5576" x="211.2715" y="467.1709">&#10060; fallback_service</text><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,462.3242 191.2715,462.3242 L201.2715,462.3242 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="118.5469" x="201.2715" y="500.4727"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.5469" x="211.2715" y="523.4678">&#10060; routes_login</text><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,518.6211 191.2715,518.6211 L201.2715,518.6211 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="145.0635" x="201.2715" y="556.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125.0635" x="211.2715" y="579.9717">&#10004;&#65039; CookieManager</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208.1816" x="399.335" y="561.6748">Additional data from gateway</text><path d="M346.335,575.125 L356.335,575.125 C371.335,575.125 371.335,556.8281 386.335,556.8281 L396.335,556.8281 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211.8115" x="399.335" y="579.9717">either inject into jRPC payload</text><path d="M346.335,575.125 L356.335,575.125 C371.335,575.125 371.335,575.125 386.335,575.125 L396.335,575.125 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123.4023" x="399.335" y="598.2686">&#10004;&#65039; or into cookies.</text><path d="M346.335,575.125 L356.335,575.125 C371.335,575.125 371.335,593.4219 386.335,593.4219 L396.335,593.4219 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,575.125 191.2715,575.125 L201.2715,575.125 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#FFFF00" height="36.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="206.1836" x="201.2715" y="613.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.1836" x="211.2715" y="636.2686">&#10004;&#65039; mw_req_stamp_resolver</text><path d="M151.2715,334.7852 L161.2715,334.7852 C176.2715,334.7852 176.2715,631.4219 191.2715,631.4219 L201.2715,631.4219 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[TLJDZjis4BxpAGRe9H6ozZe8keQ2ejawQRiREskiD-cXA0oQ6ibSIwH2KjQw3z1JWG95Sqlo77sUVO6-GcSesN7wSoFdzvjlVfxv85sejCagMOi4leBfT0O_MBT19v84b3MvBkYLB64jNQPiXZ0-7OyWjmwCRQCg5RasijG_8xHhDB0PUyYmBkskGXF0AjKuB-JADe4CP832eWTjWkqJFFgdM6J6WqDlooqwgApQi8A2RaygXe113PuAHdZ_uLTGuMvvCBx_vNT8aYYoDXpaIKBMFtwnmxAqxKzaSV_n7HkLAFDFpj4gIS_B4jf8WeTMqySWPY2XyMH3a0FU1H24SqCK47OBOOrGsg8WCy8PxLhfGPeC2WnH87oDIkTQGIQ370XnVjTKKCfTboMiOJWygcGuZDvxsTj6EvO9nWM5GnbIy46hJUSRc422fh0EGaoaWOkOcO5H1DXg2RVUcXDNAr2IQjB61vGPs9oLulkRcpbChDreQW8rTqqwHlPrv3b93ROzhvzHHepnO43iPONGr1sUmjeCZApGYue2HHovipmE1l-dGM8ub4rO3uUFgEn21cpbhllKJbVIzPyMLvqPZm48wH2u7hMsMg5_ocYJb5AmqL5uAlWMLV0KOHBkcCeuQfUBgrTmFPz4Khpe601DlIkzfHQ0hOEsfcCX0RcX_fBR-VnYUNFryiMhZddw0lLuomYWq5i46dRHBSw2TmnMEyZPkG0TOcVh9eJuDJHPZYIs0W86TiKmMNoyOt0HqNCI7LSjEzH1beSYQhahhSmySrr1ps54leohKg6apLhPR4VxxBcG5PAJynXRw7WWAEhUu_qVV_tv6oVefe7dGlKZqaMwRNpOAtb9V0n6PGtwugyvOgJeFv1t6zmbEHhp_Lxdr96LL9jbp-nUxeXRz4lQDssE8dIjcqaZYtYzAFjvbcdkdYpZqlsBbIKW3IjXxsQZEpwtHqIAOnwisn-jIC7WiulIsrGjLx6akrhLX-4JuXdIYUtFh9YNqeJNiocGoXCw60qUdpv-CZXxi22U5bZ3wHcCHkbed8xEuFND15ZzK3puRZu5Rnkd43BjWzEhXgjxA2xbLi9rOuAkC8Mh6itbyvTx0RmmMqshnyTONBwPVJBuyid9DvepEZv-RsRYEUQoAGDvqAMdBgQK_TkJiPXAKpH4QmfeQ4KehjkHRl4t]--></g></svg>